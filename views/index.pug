doctype html
html
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='theme-color', content='#4DA5F4')
    meta(name='csrf-token', content=csrfToken)
    title scroll.
    link(rel='shortcut icon', href='/favicon.ico')
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css')
    link(rel='stylesheet', href='/ui_layout.css')
    link(rel='stylesheet', href='/script.css')
    script(src='https://code.jquery.com/jquery-3.6.0.min.js')
    script(src='https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js')
    script.
      let numComments = -1;
    script(src='/postFunctionalities.js')
    script(src='/main.js')

  body.dimmable
    .ui.container(style='padding-top: 2em;')
      h1(style='font-size: 2.5em; font-weight: 200; color: #333; text-align: center; margin-bottom: 0.2em;') scroll.
      p(style='text-align: center; color: #666; font-size: 1.1em; margin-bottom: 2em;')
        | Created by 
        a(href='https://github.com/michaellhan', style='color: #4DA5F4; text-decoration: none;') Michael Han
    
    .ui.vertically.padded.grid.container#pagegrid
      .ui.grid.container#pagecontainer
        .sixteen.wide.column#loading(style='display: none;')
          img.ui.centered.small.image(src='/images/icons/heart.svg', onerror="this.onerror=null;this.src='https://via.placeholder.com/50?text=Loading'")

        .sixteen.wide.column.hidden#content(style='display: block;')
          each post in posts
            .ui.fluid.card(postcondition='', postid=post._id, type='actor', actor_un=post.author.username, actor_name=post.author.name, actor_pic=post.author.profilePic)
              .content
                .right.floated.time.meta= post.timeAgo
                .ui.avatar.image
                  img(src=post.author.profilePic || '/images/profile/profile.jpg', onerror="this.onerror=null;this.src='/images/icons/no-avatar.png'")
                span= post.author.name
              .content.dimmable
                .ui.dimmer.flag
                  .content
                    .center
                      h2.ui.inverted.icon.header
                        i.red.flag.icon
                        | You've flagged this!
                      h3.ui.inverted.header
                        span The admins will review this post further. We are sorry you had this experience.
                      .ui.inverted.unflag.button(tabindex='0')
                        i.flag.icon
                        |  Unflag
                .img.post.image
                  img(src=post.image || '/images/icons/picture.svg', style='max-width: 100%; width: 100%; display: inline-block !important;', class='transition visible', onerror="this.onerror=null;this.src='/images/icons/picture.svg'")
                .description= post.caption
                .myTimer.hidden 0
              .ui.bottom.three.attached.icon.buttons
                .ui.reply.button(tabindex='0')
                  i.reply.icon
                  |  Reply
                .ui.flag.button(tabindex='0')
                  i.flag.icon
                  |  Flag
                .ui.labeled.button(tabindex='0')
                  .ui.like.button
                    i.heart.icon
                    |  Like
                  a.ui.basic.red.left.pointing.label.count= post.likes
              .content
                .ui.comments
                  each comment in post.comments
                    .comment(commentid=comment._id)
                      .content.transition.hidden
                        .text(style='background-color: black; color: white; padding: 0.2em;') You flagged this comment. The admins will review this comment further. We are sorry you had this experience.
                        .actions
                          a.unflag Unflag
                      .ui.avatar.image
                        img(src=comment.author.profilePic || '/images/profile/profile.jpg', onerror="this.onerror=null;this.src='/images/icons/no-avatar.png'")
                      .content
                        .header(style='display: flex; align-items: center; gap: 1em;')
                          .author= comment.author.name
                          .metadata
                            span.date= comment.timeAgo
                            .rating
                              i.heart.icon
                              span.num= comment.likes
                              |  Likes
                      .text= comment.text
                      .actions
                        a.like.comment Like
                        a.flag.comment Flag
              .extra.content
                .ui.fluid.left.labeled.right.icon.input
                  .ui.label
                    img.ui.avatar.image.small(src='/images/icons/no-avatar.png', name=user.username, onerror="this.onerror=null;this.src='/images/icons/no-avatar.png'")
                  .ui.form
                    .field
                      textarea.newcomment(type='text', placeholder='Write a Comment', rows='1', style='resize: none; border: none; background: transparent;')
                  i.big.send.link.icon
              .description
                p= post.content

        .sixteen.wide.column#loading(style='display: none;')
          img.ui.centered.small.image(src='/images/icons/heart.svg', onerror="this.onerror=null;this.src='https://via.placeholder.com/50?text=Loading'") 